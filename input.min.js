/**
 *  Для использования нужно только подключить скрипт и задать input класс form__load__file
 * 
 * Так же можно использовать для отправки либо input типа submit или button 
 * 
 * Так же после отправки очищает input и блокирует кнопку 
 */
const element=document.querySelectorAll(".form__load__file"),submit=document.querySelector("input[type=\"submit\"]"),btn=document.querySelector("input[type=\"button\"]"),disabled="disabled";window.onload=()=>{null==submit||null==btn||submit==null||btn==null?submit.setAttribute(disabled,"true"):btn.setAttribute(disabled,"true"),uploadFile(element)};const uploadFile=a=>{let b=a.length;1>=b?drag_drop_one():drag_drop(b)},drag_drop_one=()=>{["dragenter","dragover","dragleave","drop"].forEach(a=>{element[0].addEventListener(a,preventDefaults,!1)}),element[0].addEventListener("drop",handleDrop,!1),element[0].addEventListener("change",loadFiles,!1)},drag_drop=a=>{for(let b=0;b<a;b++)["dragenter","dragover","dragleave","drop"].forEach(a=>{element[b].addEventListener(a,preventDefaults,!1)}),element[b].addEventListener("drop",handleDrop,!1),element[b].addEventListener("change",loadFiles,!1)},preventDefaults=()=>{event.preventDefault(),event.stopPropagation()},handleDrop=()=>{let a=event.dataTransfer,b=a.files;null==submit||null==btn||submit==null||btn==null?submit.removeAttribute(disabled):btn.removeAttribute(disabled),null==submit||null==btn||submit==null||btn==null?submit.addEventListener("click",a=>{a.preventDefault(),fetchSend(b)}):btn.addEventListener("click",a=>{a.preventDefault(),fetchSend(b)})},loadFiles=()=>{let a=event.target.files||event.dataTransfer.files;null==submit||null==btn||submit==null||btn==null?submit.removeAttribute(disabled):btn.removeAttribute(disabled),null==submit||null==btn||submit==null||btn==null?submit.addEventListener("click",b=>{b.preventDefault(),fetchSend(a)}):btn.addEventListener("click",b=>{b.preventDefault(),fetchSend(a)})},fetchSend=a=>{let b=new FormData;b.append("file",a),fetch("test.php",{method:"POST",body:b}).then(()=>{alert("\u0424\u0430\u0439\u043B\u044B \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u043D\u044B"),clearInput()}).catch(()=>{alert("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435"),clearInput()})},clearInput=()=>{let a=element.length;for(let b=0;b<a;b++)element[b].value="";null==submit||null==btn||submit==null||btn==null?submit.setAttribute(disabled,"true"):btn.setAttribute(disabled,"true")};